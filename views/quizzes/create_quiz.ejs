<!DOCTYPE html>
<html lang="en">
<head>
  <%- include('../partials/head.ejs') %>
  <link rel="stylesheet" href="/swei.css">
  <title>Create New Quiz</title>
</head>
<body>
  <%- include('../partials/nav.ejs') %>

  <div class="content create-quiz container">
    <h1>New Quiz</h1>
    <form id="quizForm" action="/quizzes" method="POST">
      <div class="inputBox">
        <label for="title">Title:</label>
        <input type="text" id="title" name="title" required>
      </div>
      <div class="inputBox">
        <label for="author">Author:</label>
        <input type="text" id="author" name="author" required>
      </div>
      <div class="inputBox">
        <label for="exp">Difficulty:</label>
        <select id="exp" name="exp" required>
          <option value="20">20 exp (Easy)</option>
          <option value="40">40 exp (Medium)</option>
          <option value="60">60 exp (Hard)</option>
        </select>
      </div>

      <div id="questionsContainer">
        <div class="question">
          <div class="inputBox">
            <label for="question1">Question 1:</label>
            <input type="text" id="question1" name="questions[0][question]" required>
          </div>
          <div class="inputBox">
            <label for="option1_1">Option 1:</label>
            <input type="text" id="option1_1" name="questions[0][options][]" required>
          </div>
          <div class="inputBox">
            <label for="option1_2">Option 2:</label>
            <input type="text" id="option1_2" name="questions[0][options][]" required>
          </div>
          <div class="inputBox">
            <label for="option1_3">Option 3:</label>
            <input type="text" id="option1_3" name="questions[0][options][]" required>
          </div>
          <div class="inputBox">
            <label for="option1_4">Option 4:</label>
            <input type="text" id="option1_4" name="questions[0][options][]" required>
          </div>
          <div class="inputBox">
            <label for="correctAnswer1">Correct Answer:</label>
            <input type="text" id="correctAnswer1" name="questions[0][correctAnswer]" required>
          </div>
        </div>
      </div>

      <button type="button" class="btn" onclick="addQuestion()">Add Another Question</button>
      <button type="submit" class="btn submit">Add Quiz</button>
    </form>
  </div>

  <%- include('../partials/footer.ejs') %>

  <script>
    let questionCount = 1;

    function addQuestion() {
      const container = document.getElementById('questionsContainer');
      questionCount++;

      const questionDiv = document.createElement('div');
      questionDiv.classList.add('question');
      
      questionDiv.innerHTML = `
        <div class="inputBox">
          <label for="question${questionCount}">Question ${questionCount}:</label>
          <input type="text" id="question${questionCount}" name="questions[${questionCount - 1}][question]" required>
        </div>
        <div class="inputBox">
          <label for="option${questionCount}_1">Option 1:</label>
          <input type="text" id="option${questionCount}_1" name="questions[${questionCount - 1}][options][]" required>
        </div>
        <div class="inputBox">
          <label for="option${questionCount}_2">Option 2:</label>
          <input type="text" id="option${questionCount}_2" name="questions[${questionCount - 1}][options][]" required>
        </div>
        <div class="inputBox">
          <label for="option${questionCount}_3">Option 3:</label>
          <input type="text" id="option${questionCount}_3" name="questions[${questionCount - 1}][options][]" required>
        </div>
        <div class="inputBox">
          <label for="option${questionCount}_4">Option 4:</label>
          <input type="text" id="option${questionCount}_4" name="questions[${questionCount - 1}][options][]" required>
        </div>
        <div class="inputBox">
          <label for="correctAnswer${questionCount}">Correct Answer:</label>
          <input type="text" id="correctAnswer${questionCount}" name="questions[${questionCount - 1}][correctAnswer]" required>
        </div>
      `;

      container.appendChild(questionDiv);
    }
  </script>
</body>
</html>
