<html lang="en">
    <%- include('../partials/head.ejs') %>
<body>
    <%- include('../partials/nav.ejs') %>

    <div class="create-quiz container">
        <h1>New Quiz</h1>
        <form id="quizForm" action="/quizzes" method="POST">
            <div>
                <label for="title">Title:</label>
                <input type="text" id="title" name="title" required>
            </div>
            <div>
                <label for="author">Author:</label>
                <input type="text" id="author" name="author" required>
            </div>

            <div id="questionsContainer">
                <div class="question">
                    <label for="question1">Question 1:</label>
                    <input type="text" id="question1" name="questions[0][question]" required>
                        <label for="option1_1">Option 1:</label>
                        <input type="text" id="option1_1" name="questions[0][options][]" required>

                        <label for="option1_2">Option 2:</label>
                        <input type="text" id="option1_2" name="questions[0][options][]" required>

                        <label for="option1_3">Option 3:</label>
                        <input type="text" id="option1_3" name="questions[0][options][]" required>

                        <label for="option1_4">Option 4:</label>
                        <input type="text" id="option1_4" name="questions[0][options][]" required>

                        <label for="correctAnswer1">Correct Answer:</label>
                        <input type="text" id="correctAnswer1" name="questions[0][correctAnswer]" required>
                    </div>
                </div>
            </div>

            <button type="button" onclick="addQuestion()">Add Another Question</button>
            <button type="submit">Add Quiz</button>
        </form>
    </div>

    <%- include('../partials/footer.ejs') %>

    <script>
        let questionCount = 1;

        function addQuestion() {
            const container = document.getElementById('questionsContainer');
            questionCount++;

            const questionDiv = document.createElement('div');
            questionDiv.classList.add('question');
            
            questionDiv.innerHTML = `
                <label for="question${questionCount}">Question ${questionCount}:</label>
                <input type="text" id="question${questionCount}" name="questions[${questionCount - 1}][question]" required>
                <div>
                    <label for="option${questionCount}_1">Option 1:</label>
                    <input type="text" id="option${questionCount}_1" name="questions[${questionCount - 1}][options][]" required>
                </div>
                <div>
                    <label for="option${questionCount}_2">Option 2:</label>
                    <input type="text" id="option${questionCount}_2" name="questions[${questionCount - 1}][options][]" required>
                </div>
                <div>
                    <label for="option${questionCount}_3">Option 3:</label>
                    <input type="text" id="option${questionCount}_3" name="questions[${questionCount - 1}][options][]" required>
                </div>
                <div>
                    <label for="option${questionCount}_4">Option 4:</label>
                    <input type="text" id="option${questionCount}_4" name="questions[${questionCount - 1}][options][]" required>
                </div>
                <div>
                    <label for="correctAnswer${questionCount}">Correct Answer:</label>
                    <input type="text" id="correctAnswer${questionCount}" name="questions[${questionCount - 1}][correctAnswer]" required>
                </div>
            `;

            container.appendChild(questionDiv);
        }
    </script>
</body>
</html>
