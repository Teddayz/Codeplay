<!DOCTYPE html>
<html lang="en">
<head>
  <%- include('../partials/head.ejs') %>
  <link rel="stylesheet" href="/swei.css">
  <title>Create New Quiz</title>
</head>
<body>
  <%- include('../partials/nav.ejs') %>

  <div class="content create-quiz container">
    <h1>New Quiz</h1>
    <form id="quizForm" action="/quizzes" method="POST">
      <div class="inputBox">
        <label for="title">Title:</label>
        <input type="text" id="title" name="title" required>
      </div>
      
      <div class="inputBox">
        <label for="language">Choose a language:</label>
        <select name="language" id="language">
          <option value="Java">Java</option>
          <option value="Python">Python</option>
          <option value="JavaScript">JavaScript</option>
        </select>
      </div>
      
      <div class="inputBox">
        <label for="author">Author:</label>
        <input type="text" id="author" name="author" required>
      </div>
      <div class="inputBox">
        <label for="exp">Difficulty:</label>
        <select id="exp" name="exp" required>
          <option value="20">20 exp (Easy)</option>
          <option value="40">40 exp (Medium)</option>
          <option value="60">60 exp (Hard)</option>
        </select>
      </div>

      <div id="questionsContainer">
        <div class="question">
          <div class="inputBox">
            <label for="question1">Question 1:</label>
            <input type="text" id="question1" name="questions[0][question]" required>
          </div>
          <div class="inputBox option">
            <input type="radio" id="q0o0" name="questions[0][correctAnswer]" value="0" required>
            <label for="q0o0">Option 1: <input type="text" name="questions[0][options][]" required></label>
          </div>
          <div class="inputBox option">
            <input type="radio" id="q0o1" name="questions[0][correctAnswer]" value="1">
            <label for="q0o1">Option 2: <input type="text" name="questions[0][options][]" required></label>
          </div>
          <div class="inputBox option">
            <input type="radio" id="q0o2" name="questions[0][correctAnswer]" value="2">
            <label for="q0o2">Option 3: <input type="text" name="questions[0][options][]" required></label>
          </div>
          <div class="inputBox option">
            <input type="radio" id="q0o3" name="questions[0][correctAnswer]" value="3">
            <label for="q0o3">Option 4: <input type="text" name="questions[0][options][]" required></label>
          </div>
        </div>
      </div>

      <button type="button" class="btn" onclick="addQuestion()">Add Another Question</button>
      <button type="submit" class="btn submit">Add Quiz</button>
    </form>
  </div>

  <%- include('../partials/footer.ejs') %>

  <script>
    let questionCount = 1;

    function addQuestion() {
      const container = document.getElementById('questionsContainer');
      questionCount++;

      const questionDiv = document.createElement('div');
      questionDiv.classList.add('question');
      
      questionDiv.innerHTML = `
        <div class="inputBox">
          <label for="question${questionCount}">Question ${questionCount}:</label>
          <input type="text" id="question${questionCount}" name="questions[${questionCount - 1}][question]" required>
        </div>
        <div class="inputBox option">
          <input type="radio" id="q${questionCount - 1}o0" name="questions[${questionCount - 1}][correctAnswer]" value="0" required>
          <label for="q${questionCount - 1}o0">Option 1: <input type="text" name="questions[${questionCount - 1}][options][]" required></label>
        </div>
        <div class="inputBox option">
          <input type="radio" id="q${questionCount - 1}o1" name="questions[${questionCount - 1}][correctAnswer]" value="1">
          <label for="q${questionCount - 1}o1">Option 2: <input type="text" name="questions[${questionCount - 1}][options][]" required></label>
        </div>
        <div class="inputBox option">
          <input type="radio" id="q${questionCount - 1}o2" name="questions[${questionCount - 1}][correctAnswer]" value="2">
          <label for="q${questionCount - 1}o2">Option 3: <input type="text" name="questions[${questionCount - 1}][options][]" required></label>
        </div>
        <div class="inputBox option">
          <input type="radio" id="q${questionCount - 1}o3" name="questions[${questionCount - 1}][correctAnswer]" value="3">
          <label for="q${questionCount - 1}o3">Option 4: <input type="text" name="questions[${questionCount - 1}][options][]" required></label>
        </div>
      `;

      container.appendChild(questionDiv);
    }
  </script>
</body>
</html>
